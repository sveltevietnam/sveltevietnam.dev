assert_lefthook_installed: true
min_version: 1.11.3
pre-commit:
  follow: true
  parallel: true
  skip:
    - merge
    - rebase
  jobs:
    - name: sveltevietnam.dev
      root: sites/sveltevietnam.dev
      glob: '*.svelte'
      exclude:
        - '*.md.svelte'
      group:
        piped: true
        jobs:
          - name: eslint
            run: pnpm eslint --fix {staged_files}
            stage_fixed: true
          - name: svelte-check
            run: pnpm svelte-check
            stage_fixed: true
          - name: prettier
            run: pnpm prettier --write {staged_files}
            stage_fixed: true

    - name: eslint
      run: pnpm eslint --fix {staged_files}
      glob: '*.{js,ts}'
      stage_fixed: true

    - name: stylelint
      run: pnpm stylelint {staged_files}
      glob: '*.{svelte,css}'
      stage_fixed: true
      exclude:
        - '*.md.svelte'

    - name: prettier
      run: pnpm prettier --write {staged_files}
      glob: '*.{js,ts,css,json,md,yaml}'
      stage_fixed: true
      exclude:
        - pnpm-lock.yaml
